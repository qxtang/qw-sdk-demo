<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="企微中台 jssdk" />
  <title>qw-sdk-demo:vue</title>
  <script src="//cdn.bootcdn.net/ajax/libs/vue/2.4.4/vue.min.js"></script>
  <style>
    html,
    body {
      height: auto !important;
      padding: 10px;
    }

    .flex {
      display: flex;
      align-items: center;
    }

    .flex>* {
      margin-right: 10px;
    }

    #qw-container {
      margin: 30px auto;
      max-width: 100vw;
      width: 800px;
    }
  </style>
</head>

<body>
  <div id="app">
    <h1>我是接入方~</h1>
    <div>渠道码信息: {{ JSON.stringify(channelInfo) }}</div>

    <div class="flex">
      <div>
        <label for="select">切换页面：</label>
        <select @change="handleSelectChange">
          <option value="ChannelCode">ChannelCode</option>
          <option value="MaterialCenter">MaterialCenter</option>
          <option value="Greeting">Greeting</option>
        </select>
      </div>
      <div>
        <label for="color">修改主题色：</label>
        <input type="color" value="#40a9ff" @change="handleColorChange" />
      </div>
    </div>

    <div id="qw-container"></div>
  </div>

  <script src="/dist/qwsdk.js"></script>
  <script>
    new Vue({
      el: '#app',
      data: function () {
        return {
          qwInstance: null,
          channelInfo: {},
        };
      },
      methods: {
        getChannelInfo(info) {
          this.channelInfo = info;
        },

        handleSelectChange(e) {
          const value = e.target.value;
          this.qwInstance.render({
            page: value,
            permission: ['00', '01'],
            pageProps: {
              onGetChannelInfoBtnClick: this.getChannelInfo,
            }
          });
        },

        handleColorChange(e) {
          const value = e.target.value;
          this.qwInstance.setTheme({
            primaryColor: value,
          });
        },
      },
      mounted() {
        this.qwInstance = new QwSdk({
          container: 'qw-container', // 容器元素 id
        });

        this.qwInstance.render({
          page: 'ChannelCode', // 要渲染哪一个中台组件
          permission: ['00', '01'], // 权限点
          pageProps: { // 传给页面组件的属性
            onGetChannelInfoBtnClick: this.getChannelInfo,
          }
        });
      },
    });
  </script>
</body>

</html>